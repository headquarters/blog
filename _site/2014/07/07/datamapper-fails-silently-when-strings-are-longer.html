<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
        <!--
               _
              | |
              | |
           ___|  \____
          |___]   
         |____]     
          |___]    |___
           |___]__/
           
           Cool.
        -->
  <title>DataMapper fails silently when strings are longer than schema property | Michael Head</title>
  <meta name="description" content="When inserting content into your database using DataMapper’s create method, any String longer than the corresponding schema property will cause the create me...">

  <link rel="stylesheet" href="/css/main.css">
        
  <link rel="canonical" href="https://www.michaelehead.com/2014/07/07/datamapper-fails-silently-when-strings-are-longer.html">
  <link rel="alternate" type="application/rss+xml" title="Michael's Headquarters" href="https://www.michaelehead.com/feed.xml" />
  <script src="/js/modernizr-2.6.2.min.js"></script>
</head>
<body>

<div class="site-header">
    <a href="#main" id="go-to-main" class="site-header--content-link">Go to content &darr;</a>
    <header class="site-header--titles">
        <h1 class="site-header--title">Michael's Headquarters</h1>
        <h2 class="site-header--subtitle">On UX Design and Development</h2>
    </header>
    <nav class="main-nav">
        <ul class="main-nav--list">
          <li class="main-nav--list-item "><a class="main-nav--link" href="/">About</a></li>
          <li class="main-nav--list-item active"><a class="main-nav--link" href="/blog/">Blog</a></li>
        </ul>
    </nav>        
</div>

<main id="main" class="blog">
  <div class="post content ">
	<header class="post-header">
        <h1 class="post-title">DataMapper fails silently when strings are longer than schema property</h1>
        <time class="post-date" datetime="">
            Jul 7, 2014
        </time>
    </header>
	<article class="post-content">
	<p>When inserting content into your database using DataMapper’s create method, any String longer than the corresponding schema property will cause the create method to fail silently. For example, if your model has a property with a :length of 256 as below:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Message</span>
  <span class="kp">include</span> <span class="no">DataMapper</span><span class="o">::</span><span class="no">Resource</span>
  
  <span class="n">property</span> <span class="ss">:id</span><span class="p">,</span> <span class="no">Serial</span>
  <span class="n">property</span> <span class="ss">:message</span><span class="p">,</span> <span class="no">String</span><span class="p">,</span> <span class="ss">:length</span> <span class="o">=&gt;</span> <span class="mi">8</span>
<span class="k">end</span></code></pre></figure>

<p>then the following code will fail silently and not insert a row:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">    <span class="no">Message</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:message</span> <span class="o">=&gt;</span> <span class="s2">"This message is more than 8 characters long"</span><span class="p">)</span></code></pre></figure>

<p>So, be sure to double check your :length attributes.</p>

	</article>
</div>

</main>

        <footer class="footer row">
          <div class="col">
                <div class="footer--social">
                    <a class="footer--link" href="https://www.buymeacoffee.com/mhead" target="_blank" title="Find anything useful or interesting on this site? Please, buy me a cup of coffee!"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;" ></a>
                    <a class="footer--link" href="http://github.com/headquarters"><img src="/images/icons/GitHub.png" alt="GitHub" /></a>
                    <a class="footer--link" href="http://linkedin.com/in/michaelehead"><img src="/images/icons/LinkedIn.png" alt="LinkedIn" /></a>
                </div>
                <section class="footer--blog-info">
                  <div class="footer--copyright">&copy; 2023</div>
                  <div class="footer--poweredby">Generated by <a href="http://jeykyllrb.com">Jekyll</a></div>
              </section>
              <a class="footer--go-to-top" href="#go-to-main">&uarr; Top</a>
          </div>
        </footer>
    </body>
</html>

